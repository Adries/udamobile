function initialize(){$("#Loading").hide();directionsService=new google.maps.DirectionsService;directionsDisplay=new google.maps.DirectionsRenderer;input=document.getElementById("searchTextField");autocomplete=new google.maps.places.Autocomplete(input);address=new google.maps.LatLng(45.769,3.09);end=new google.maps.LatLng(45.764892,3.086801);mapOptions={zoom:17,mapTypeId:google.maps.MapTypeId.ROADMAP,center:address,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,mapition:google.maps.ControlPosition.TOP_LEFT}};map=new google.maps.Map(document.getElementById("mapholder"),mapOptions);google.maps.event.trigger(map,"resize")}function getLocation(){$.msgBox({title:"loading...",content:"chargement...",type:"info",opacity:.9,showButtons:false,autoClose:true});$("#Loading").show();$("#mapholder").css({opacity:0,zoom:0});if(navigator.geolocation){navigator.geolocation.getCurrentPosition(showPosition,showError)}else{x.innerHTML="Geolocation is not supported by this browser."}}function showPosition(e){address=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);mapOptions={zoom:17,center:address,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("mapholder"),mapOptions);google.maps.event.trigger(map,"resize");myMarker=new google.maps.Marker({map:map,position:address});$("#mapholder").show();$("#liste_class").hide();$("#mapholder").css({opacity:1,zoom:1});$("#Loading").hide()}function showError(e){switch(e.code){case e.PERMISSION_DENIED:x.innerHTML="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:x.innerHTML="Location information is unavailable.";break;case e.TIMEOUT:x.innerHTML="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:x.innerHTML="An unknown error occurred.";break}}function calcRoute(e,t){directionsDisplay.setMap(map);directionsDisplay.setPanel(document.getElementById("mapplacetext"));requeteItineraire={origin:address,destination:t,region:"fr",travelMode:google.maps.DirectionsTravelMode.DRIVING};directionsService.route(requeteItineraire,function(e,t){if(t==google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(e)}});address=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);var n=document.getElementById("searchTextField").value;requeteItineraire={origin:address,destination:t,region:"fr",travelMode:google.maps.TravelMode[n]};directionsService.route(requeteItineraire,function(e,t){if(t==google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(e)}})}function search_er(){map=new google.maps.Map(document.getElementById("mapholder"),mapOptions);autocomplete.bindTo("bounds",map);var e=autocomplete.getPlace();if(!e.geometry){input.className="notfound";return}if(e.geometry.viewport){map.fitBounds(e.geometry.viewport)}else{map.setCenter(e.geometry.location);map.setZoom(17)}var t=new google.maps.InfoWindow({map:map,position:e.geometry.location,content:input.value});google.maps.event.addListener(autocomplete,"place_changed",function(){t.close();marker.setVisible(false);input.className="";var e=autocomplete.getPlace();if(!e.geometry){input.className="notfound";return}if(e.geometry.viewport){map.fitBounds(e.geometry.viewport)}else{map.setCenter(e.geometry.location);map.setZoom(15)}myMarker=new google.maps.Marker({map:map,position:e.geometry.location});address="";if(e.address_components){address=[e.address_components[0]&&e.address_components[0].short_name||"",e.address_components[1]&&e.address_components[1].short_name||"",e.address_components[2]&&e.address_components[2].short_name||""].join(" ")}getLatLng(address)})}var map,myMarker,input,autocomplete,address,mapOptions,directionDisplay,end,html="",a=3,counter=0,nbelt,i,lat,lon,requeteItineraire,directionsService